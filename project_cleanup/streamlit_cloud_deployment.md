# Инструкция по деплою на Streamlit Cloud

## Подготовка проекта

1. Убедитесь, что у вас есть файл `app_cloud.py` - упрощенная версия приложения для Streamlit Cloud
2. Скопируйте файл `.streamlit/config_cloud.toml` в `.streamlit/config.toml` перед деплоем
3. Переименуйте `requirements-clean.txt` в `requirements.txt` или укажите его в настройках деплоя

## Настройка параметров деплоя в Streamlit Cloud

В интерфейсе Streamlit Cloud укажите следующие параметры:

1. **Main file path**: `app_cloud.py` - основной файл приложения
2. **Python version**: `3.11` - используйте Python 3.11, а не 3.12
3. **Requirements file**: `requirements.txt` или `requirements-clean.txt`
4. **Packages**: Дополнительные системные пакеты из `packages.txt` (если необходимо)

## Решение проблемы с портами

Streamlit Cloud ожидает, что приложение будет доступно на порту 8501. Есть несколько способов настроить это:

1. **Через config.toml**:
   ```toml
   # .streamlit/config.toml
   [server]
   headless = true
   port = 8501
   ```

2. **Через переменную окружения**:
   ```python
   # В файле app_cloud.py
   PORT = int(os.environ.get("PORT", 8501))
   ```

## Возможные проблемы и их решения

1. **"No module named 'distutils'"**:
   - Используйте Python 3.11 вместо 3.12
   - Обновите версии пакетов в requirements.txt
   - Добавьте `setuptools-distutils` в зависимости

2. **"Connection refused on port 8501"**:
   - Проверьте настройки порта в `.streamlit/config.toml`
   - Убедитесь, что приложение не привязано жестко к другому порту

3. **"Could not find a required file"**:
   - Используйте простой подход без пакетной структуры
   - Удалите или переименуйте `pyproject.toml`
   - Убедитесь, что все импорты в коде работают с текущей структурой каталогов

## Проверочный список

- [ ] Использование Python 3.11 в настройках деплоя
- [ ] Порт 8501 в конфигурации Streamlit
- [ ] Использование app_cloud.py как точки входа
- [ ] Обновленные зависимости в requirements.txt
- [ ] Отсутствие конфликтов в pyproject.toml

## Альтернативный подход: Static Build

Если возникают проблемы с деплоем динамического приложения, рассмотрите возможность создания статической версии:

1. Запустите приложение локально
2. Сделайте снимки экрана ключевых страниц
3. Создайте HTML-страницы на основе этих снимков
4. Разместите статические страницы на GitHub Pages